CURRENT:
- f5/f9 a konsola
	f5 - can't save - display above console
	f9 - load failed - display above console, stop blocking fallback when console is open
	+ fixed journal blocking quicksave/quickload
- zly teren pola
- grass is drawn only next to roads/on field
- update create character screen, for single frame there is no doll
- cursor focus bug - start server/client, activate serwer when possible, start game, alt tab to client when loaded - cursor is visible
	- everything is ok except the system cursor is visible
- physics of stairs up don't work for camera
- game saved center text don't show for clients
- when client disconnect on loading worldmap with START_ON_WORLDMAP server will crash in RemovePlayerOnLoad
- 122.stream
- GenericInfoBox, RemovePlayerOnLoad don't remove interpolator (u->interp)
- client can't save when leader
	? am i even checking is he leader
	- contest_state >= CONTEST_STARTING || tournament_state != TOURNAMENT_NOT_DONE
		tournament_state, contest maybe too
- warp village inn, hall, goto city, warp hall - objects from village inside (mp save WEIRD)
- deliver parcel - encounter bandits without parcel -> crash in dialog
- tutorial - autorun is on
===============================================================================================================
NEW:
+ BaseBullet for Bullet, save by base, no mesh etc
+ Resources - hashing
+ custom formatter %.2g - 1000.123 -> 1000.12 (in printf it write 1.E cośtam)
+ loading when required feature:
	+ spells
	+ more hardcoded sounds
	+ more hardcoded textures
	+ more hardcoded meshes
	+ better prepare, not at end in second loop but when object is created
	+ don't preload human meshes (need to make changes to AddPlayerTeam to handle mesh loading)
	+ Unit::Load require instant loading of mesh
	+ preload shaders
	+ PreloadItem TryLoad and use replacement icon
	+ preload and unhardcode items
	+ human mesh/startup items on opening create character screen - show small loading window
	+ don't keep mesh_id when you can keep only mesh and Get it on loading
+ npc generator like in gta - spawn units using usables
+ common class Level instead of LevelContext and InsideBuilding, vector<Level*> levels that contains local_ctx and inside buildings
+ remove ITEM_SECRET ?
+ load Str at start or when required (less variables vs error logging at startup)
+ better inside buildings
	+ combat
	+ traps
	+ chests
	+ temporary effects
	+ AI_HitReaction don't work inside
	+ CanSee
+ refactor network
	+ sv_startup is started in 4 places
+ multiplayer - CanSave - server side
+ questitem in multiplayer, player don't play and quests are forever unfinished
===============================================================================================================
VERIFY:
- da się pogadać gdy leży, wtedy wstaje od razu [da się pogadać jak wstaje]
- w questowych lokacjach krew/zwłoki nie znikają
- wskaźnik na fizykę, ale co jak objects się rozszerza i obiekt zmienia pozycję
- with big lag (there is limit to 0.3 dt) player can move thru units, doors, objects (like in deus ex, save game while moving into barrier and after saving you are on other side)
	- zombie attack animation end but attack is not complete, it will stay and do nothing
- da sie wlezc w kogos
- ANGLE!
- wydobywaniem rudy można zablokować kogoś kto tam stoi
- fov may not work good when near borders
- verify dialogs ending with end/restart
- without human flag and mesh crash when spawned, log error
- 21:35:32 WARN  - NM_TRANSFER: Unknown packet 104. Unknown packet 97.
SERVER
	19:02:38 INFO  - Preparing world data.
	19:02:38 INFO  - NM_TRANSFER_SERVER: Send world data, size 3055.
	19:02:43 INFO  - NM_TRANSFER_SERVER: Disconnecting player Diablox2 due no response.
CLIENT
	19:02:38 INFO  - UpdateLobbyNet: Starting in 0...
	19:02:38 INFO  - UpdateLobbyNet: Waiting for server.
	19:02:38 WARN  - NM_TRANSFER: Unknown packet 97.
- przenoszenie do walki gdy jesteś w środku areny
- dźwięki areny gdy się na niej jest ale nie bierze udziału
- blokada widoku przez drewno u kowala
- debug ai lag is too big!
- input don't work when there is lag, but why? maybe it can happen without lag too
- oświetlenie na zewnątrz dla terenu, pod małym kątem jest biała trawa [na ziemie i trawie zato widać trawę pod kątem, mipmaping?]
- when closing game there is message that client was kicked
===============================================================================================================
ZNANE BŁEDY:
- wyszukiwanie ścieżek ai nie działa zbyt dobrze i mogą się zablokować
- członkowie drużyny żeby się odblokować przechodzą przez obiekty i inne jednostki
- wydobywaniem rudy można zablokować kogoś kto tam stoi
OMINIĘTE:
- fizyka rrect-circle znowu zepsuta :S [teraz działała bez problemu więc nie wiem :S, najbardziej dotyczy to wozów, chyba chodzi
  o środek obrotu, w fizyce jest ten sam problem, widać że bbox odbiega od tego co powinno być, występuje gdy środek bboxa nie jest w punkcie
  0,0,0; na tą wersję po prostu w modelach dam zero, może w następnej się to naprawi)
- trochę da się widzieć przez ściany :/
- SeenEnemy nie uwzględnia budynku, jak jest na zewnątrz to stoi i nic nie robi
- przesuniętą fizyke w obiektach obsługuje tylko SpawnObject [czyli nie obsługuje GenerateDungeonObjects], i to tylko dla boxów, nie używalnych
- w czasie spotkania może wygenerować silniejszych wrogów niż poziom :(
- jeśli w mp osoba coś powie i zostanie usunięta w tej samej ramce to u klienta ten tekst się nie wyświetli
- pf może się coś zawiesić że stoi w miejscu, dotyczy ai, linijka [ai.cp:2030], według mnie ktoś podczas pf zablkowoał mu drogę i wlazł w blokujące miejsce a że według pf nic się nie zmieniło
	(pozycja ta sama tylko nikt już nie blokuje) to nie szedł
- D3DX: Warning ID3DXEffect::EndPass. Changes have been made but not commited. CommitChange must be called before each DrawPrimitive call
- po wejściu do gry i powrocie do menu jest obwódka wokół obrazka, przez multisampling
===============================================================================================================
POTRZEBA PRZYKŁADÓW:
- zapytałem gostka o miejsca i powiedział o krypcie na zachód, a jest na wschód [to było w release, potrzeba więcej testów]
- raz jeden z herosów miał nullptr w items._Myfirst, dodałem logowanie gdy się to wydarzy
- spłaciłem kredyt i miałem -14 kredytu w MP
- po zrekrutowaniu heros nie miał podświetlanego nicka (darmowy?, po którejś grze? po samouczku? nie darmowy?)
? madman skrzynia -> crash
- ai look at angle nie jest clipowane, albo coś?
- jednostka po walce na arenie miała in_building 1, ale pozycję przed areną, zcrashowało na FindLocalPath bo dystans był za duży
- check unit ai error, bohater po walce na arenie, nie ma ai; czasami hero nie ma ai
- crash na UpdateSpeechBoubbles, boubble->unit->mesh_inst = nullptr
- u leinnana po wczytaniu w mp nie było minimapy w mieście
- brak synchronizacji terenu pomiędzy klientem a serwerem
- [Minister of Death] In sometimes happen in multiplayer that someone get stuck to the wall when he dies, making that person unable to revive,
	thus trapping the whole party in the dungeon.
- Occasionally, when traveling to a new area, the screen would randomly get a "drunken" effect. I assume it's the same one as when you drink booze
	(I don't know as I haven't drank any yet). Happened once to me when ambushed by wild animals on the road, and once to a friend when entering a town.
	The effect goes away upon leaving and entering a new area.
- Similarly, one specific person is occasionally enters new areas and finds themselves only seeing a black screen and the chat.
	It seems to occur under the same circumstances; twice when entering a dungeon, and once when loading a save while in a forest. It hasn't happened to anyone else yet.
- If you enter a server with several people, one of them leaves, and you save the game, the save seems to corrupt.
	It only occurred once (since after it happened we stopped doing it :P) so I have no idea if it's a valid thing or not. I wasn't the host so I don't have a save, sadly.
- Direct3D9: :Dynamic vertex buffer locked twice or more in a row without D3DLOCK_NOOVERWRITE or D3DLOCK_DISCARD. Could have severe performance penalty.
- crash w trail-particle (las? u leinana mp, ale u mnie być może sp)
- błąd że po powrocie do lokacji wyskakiwało że postać nie używa obiektu, chyba naprawione, trzeba sprawdzić
- autojoin do wczytywanej gry, klient ma u siebie niegotowy, nie zawsze
- po wyłączeniu gry zcrashowało (log był już zamknięty), windowsowy błąd, u mnie i u piotrka (szkoda że zamknąłem :S)
- w karczmie po powrocie nie było jedzenia, w mieście
- showing item box in tutorial (and else?) cause fps drop to 18; can i redo this?
- mp crash for leinnan friend (why is unknown, looks like corrupted packet)
	add more checking and logging
	? full dump
	PrepareLevelData(net_stream);
	HANDLE file = CreateFile(Format("f%u", net_stream.GetNumberOfBytesUsed()), GENERIC_WRITE, FILE_SHARE_READ, nullptr, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, nullptr);
	WriteFile(file, net_stream.GetData(), net_stream.GetNumberOfBytesUsed(), &tmp, nullptr);
	CloseHandle(file);
- magic bullets and fireballs don't hit on client, aims ground, ? argh happened once & i can't reproduce it
- sawmill, messanger spawned inside client
- inventory icons disappear after alt-enter or changing multisampling [ł]; not happens on my gpu, need more info
===============================================================================================================
+ check units required by building spawn
+ map of spells/units with hashing
+ better ResourceManager (first thread "load human.qmsh" -> second: create vb,ib & return -> create, lock & return -> fill & return -> unlock etc)
+ divide Object to StaticObject and Object, this will allow fast loading of current level ?
+ disallow up stairs in middle of room, it looks stupid
+ Scene.Draw move setting light params from DrawSceneNodes to Scene.Draw, with drawing objects turned off, this params won't be set
+ ISaveable { void Save(GameWriter& f); bool Load(GameReader& f); } IWriteable { void Write(StreamWriter& s); bool Read(StreamReader& s); }
+ better info about getting gold from dividing, from pay credit
+ remove spell int id
+ start arrow trail from back (currently its from start and there is large gap)
+ logging group (Engine, ResourceManager)
+ portals with textures
+ GAME_KEY (unlock_cursor, open_menu)
+ losowe obiekty
+ zatrzymywanie muzki gdy gra jest zminimalizowana w trybie fullscreen
+ heal a death_screen
+ ustawienia console_pause, menu_pause, journal_pause
+ inactive_update w konsoli
+ wyrzucanie przedmiotów nie ustawia jednego przedmiotu w drugim tylko obok
+ paker niech kopiuje pdb i exe; paker for new system
? instancing
+ dużo drzew w lesie
+ https://github.com/cppformat/cppformat
+ xar have black shield, the wall if found in other place
+ use fullpath for filenames (allows multiple files with same name)
+ binary data files
+ paks with data/assets
+ podział na AddGold i AddItem
+ animacja przesuwania postaci przy ożywianiu
+ paker/install script 'move'
+ zmiana multisamplingu nie ma wpływu na wygenerowane obrazki przedmiotów
+ możliwość nie wyjmowania tarczy
	+ po przerwaniu akcji z używalnym obiektem, ma ten przedmiot w dłoni
+ możliwość trzymania w dłoni chochli (SLOT_HAND?)
+ lepsze rysowanie przedmiotów na ziemi, sortowanie po modelu, bez CommitChanges jeśli jest 1 materiał
+ customowy box dla np grzyba żeby mógł być częściowo w ziemi
+ tryb bezpiecznego ataku (nie można trafić neutralnych)
+ tryby wczytywania: na początku, gdy potrzeba, wczytywanie i zwalnianie
+ szybkość rozprzestrzeniania się newsów
+ obchodzenie dookoła celu, odskok w bok, animacja odskoku
? czy można przeszkadzać komuś w walce gadając z nim
+ gadania a akcja postaci (czy można gadać czy nie, np jak siada albo je można zaczekać aż skończy po kliknięciu)
? raknet wysyła wiadomości do zdisconnectowanych przy broadcast jeśli nie wyśle jeszcze disconnect
+ reputacja i rozpoznawalność, po opusczeniu zawodów kara
+ F2_MELEE dla zwykłych jednostek
+ waving trawy itp http://mbmodwiki.ollclan.eu/Swyter%27s_Simple_Waving
+ nie wiem na ile to będzie potrzebne ale można renderować splits że jest kilka pod rząd, eksportowanie może układać tak że będą pod rząd
+ możliwość nie wczytywania normalmap i specularmap
+ przechowywanie wierzchołków w Blood
+ alpha test per submesh
+ optymalizacja, spr czy rysować trail particle emitter / electro / portal / area
+ synchronizacja animacji chodzenia/obracania z szybkością (jak ktoś np klika co chwile Q,Q,Q,Q)
+ materiały dla podziemi jak Mesh::Submesh
+ nie wyświetlaj więcej powiadomienia o tej wersji
+ usunięcie niepotrzebnego kodu z eMesh, renderowanie przedmiotów nowym kodem
+ repozytorium na pdb i exe
+ coś lepszego niż fallback
+ enum ONLINE_MODE { SINGLE_PLAYER, CLIENT, SERVER };
+ lepsza walidacja wczytywania zapisów (póki co crashuje zazwyczaj :S)
+ optymalizacja kolizji (jeśli CollisionObject jest ROTATED_RECTANGLE z rot=0,PI/2,PI,3/2PI to niech zmienia go na RECTANGLE
+ What makes a computer opponent feel alive? http://gamedev.stackexchange.com/questions/16571/what-makes-a-computer-opponent-feel-alive
+ remove InfoBox from GamePanel
+ kompresja pak https://code.google.com/p/lz4/
* zapisywanie obiektów/postaci jako index/hash
* rozmiar broni/tarczy/łuku zależy od skali postaci
* % poziom trudności
* prostsze tworzenie budynków
* przestępstwa
* większa specjalizacja kowali
* pool jednostek (i innych obiektów)
* zapadnie, oskryptowalne przyciski/wajchy/płyty naciskowe
* praca: strażnik, rolnik, drwal, górnik, kupiec
* kilka schodów w górę/dół
* kostka HP, bardziej rozbudowane generowanie wrogów
* cząsteczki przyczepione do obiektów
* odrzut wrogów
* więcej tekstów po śmierci
* celowanie z łuku
* konfiguracja wbudowanych tekstur np [DeathBkg = black.jpg]
* stackowanie przedmiotów
* różne materiały ścian i obiektów
* lepszy generator przedmiotów (uwzględnianie min i max ceny)
* algorytm rot rect - rect
* rozbijanie obozu
* zwiadowcy grupy, rozmiar grupy
* zasięg okrzyku zależny od dźwięku
* lepsze rozpędzanie/zwalnianie postaci (z animacją przejściową chodzenia/biegania)
* crc zapisów
* używanie bazowy obiektów dla wszystkiego tylko trochę lepiej (teraz np w zapisie jest multum mur.qmsh zapisane)
* podtyp w BaseItem żeby nie trzeba było rzutować i sprawdzać w SortTraderItems
* światło w miejscu eksplozji
* możliwość wyboru jaką klase chcesz trenować
* rzucanie przedmiotem w ramach handlu
* cachowanie tekstów np przy zapisywaniu czy wyświetlaniu czegoś w ekwipunku
* jeden pancerz dla wszystkich i tylko używanie różnych tekstur + możliwe podmiany modelu w konfigu dla każdego z osobna
* lepsze generowanie przedmiotów w sklepie, zapamiętywanie przez jakiś czas
* GUI_Layer::allow_controls allow_close
* zasoby drużynowe
* podział łupów w karczmie lub bazie
* szybka podróż do środka miasta, opuszczenie przez kliknięcie na mapie
* przy podziale łupów automatyczna sprzedaż przedmiotów do sklepu, uzupełnianie miksturek, wymiana przedmiotów, podział złota
* interpolacja pozycji postaci i obrotów
* glify
* inactive_update -> pause on lost focus
* wchodzenie po schodach w mieście
* drzwi - możliwość dopasowania pozycji, różne tekstury z różnych stron
* flagi postaci [nie można okraść, pobić, zabić]
* bandyci pobierają złoto z kasy drużynowej/od wszystkich
* możliwość zmiany grupy jednostki i innych danych
* zapisywanie bool jako flagi (Unit, PlayerController)
* rekrutowanie jako członka drużyny (udział w zyskach) lub jako najemnika (opłata+mały udział w zyskach), niektórzy członkowie drużyny mogą wymagać zapłaty za coś (np na leczenie, na spłacenie długów)
* kredyt powinien inaczej działać, tablica 2d dla każdej postaci w drużynie, jeśli dwie osoby mają dla siebie kredyt to się zeruje
* zakaz stawiania ścian na blokadzie przy generowaniu mapy, sporo to uprości, otoczony murem
* do przeczytania o infinite game http://www.gamedev.net/page/resources/_/creative/game-design/the-infinite-game-r3045
* zapisane postacie które można wybrać przy wybieraniu postaci lub stworzenie nowej
* tyczka a przycisk na ścianie
* lina a dźwignia
